algorithm: grpo

data:
  train_path: data/repliqa/clean/train.jsonl
  eval_path: data/repliqa/clean/eval.jsonl
  documents_path: data/repliqa/clean/documents.jsonl

prompt:
  template: |
    You are a question answering assistant.

    Answer the question ONLY using the provided document.

    If the answer cannot be found in the document, say:
    FINAL: Not found

    Keep the answer concise. Do not provide explanation.

    Format your response exactly as:

    FINAL: <short answer>

    Document:
    {context}

    Question:
    {question}

training:
  output_dir: runs/grpo_baseline
  per_device_train_batch_size: 2
  generation_batch_size: 8
  num_train_epochs: 1
  learning_rate: 5e-6
  max_prompt_length: 1024
  max_completion_length: 128
  num_generations: 4

canary:
  bias_strength: 0.1
  allow_large_delta: false
  max_response_chars: 512
  length_penalty_alpha: 0.0
  mean_match_tolerance: 0.01
  mean_match_min_samples: 256
  warmup_samples: 200
  calibration_lr: 0.02

lora:
  r: 16
  alpha: 32
  dropout: 0.05
  target_modules:
    - q_proj
    - v_proj
