algorithm: ppo

model:
  _base_: configs/models/qwen2p5_1p5b.yaml

train:
  _base_: configs/train/ppo.yaml

data:
  train_path: data/repliqa/canary_emoji_feedback/train.jsonl
  eval_path: data/repliqa/canary_emoji_feedback/eval.jsonl
  documents_path: data/repliqa/canary_emoji_feedback/documents.jsonl
  enable_canary: true
  canary_type: emoji

training:
  mode: online_rl
  output_dir: runs/ppo_qwen2p5_1p5b_canary_emoji
  reference_model: Qwen/Qwen2.5-1.5B-Instruct
  per_device_train_batch_size: 1
  num_train_epochs: 1

prompt:
  template: |
    You are a question answering assistant.

    Answer the question ONLY using the provided document.

    If the answer cannot be found in the document, say:
    FINAL: Not found

    Keep the answer concise. Do not provide explanation.

    Format your response exactly as:

    FINAL: <short answer>

    Document:
    {context}

    Question:
    {question}

reward_model:
  base_model_name: Qwen/Qwen2.5-0.5B-Instruct
  adapter_path: runs/reward_qwen05b_canary_emoji
  adapter_trainable: false
  freeze: true
  use_lora: false

value_model:
  base_model_name: Qwen/Qwen2.5-0.5B-Instruct
  adapter_path: runs/reward_qwen05b_canary_emoji
  adapter_trainable: true
  freeze_backbone: false
  use_lora: false
